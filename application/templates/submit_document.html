<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Submit Document - QuickDocs</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <style>
        body {
            background-color: #f4f6f8;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        /* Form container */
        .container {
            max-width: 700px;
            margin: 2rem auto;
            padding: 2rem;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        h2 {
            text-align: center;
            color: #004aad;
            margin-bottom: 1.5rem;
        }
        label {
            display: block;
            margin-bottom: .5rem;
            font-weight: bold;
        }
        input, select, textarea {
            width: 100%;
            padding: .75rem;
            margin-bottom: 1.25rem;
            border: 1px solid #ccc;
            border-radius: 6px;
        }
        button {
            width: 100%;
            background-color: #004aad;
            color: white;
            padding: .75rem;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            cursor: pointer;
        }
        button:hover {
            background-color: #003080;
        }

        /* Toast Notification */
        .toast {
            visibility: hidden;
            min-width: 250px;
            background-color: #4CAF50;
            color: white;
            text-align: center;
            border-radius: 4px;
            padding: 12px;
            position: fixed;
            z-index: 1;
            bottom: 20px;
            right: 20px;
            font-size: 14px;
        }
        .toast.show {
            visibility: visible;
            animation: fadein 0.5s, fadeout 0.5s 2.5s;
        }
        @keyframes fadein { from { bottom: 0; opacity: 0; } to { bottom: 20px; opacity: 1; } }
        @keyframes fadeout { from { bottom: 20px; opacity: 1; } to { bottom: 0; opacity: 0; } }
    </style>
</head>
<body>

<!-- Navbar -->
<nav class="navbar">
    <div class="nav-logo">
        <a href="/" style="text-decoration: none; color: inherit;">QuickDocs</a>
    </div>
    <ul class="nav-links">
        <li><a href="/dashboard">Dashboard</a></li>
        <li><a href="/register">Register</a></li>
        <li><a href="/query">Query Interface</a></li>
    </ul>
</nav>

<!-- Form -->
<div class="container">
    <h2>Submit Document</h2>
    <form method="POST" action="/submit-document" enctype="multipart/form-data">

        <!-- Select Customer -->
        <label for="customer_id">Select Customer</label>
        <select id="customer_id" name="customer_id" required>
            {% for c in customers %}
            <option value="{{ c.customer_id }}">{{ c.name }}</option>
            {% endfor %}
        </select>

        <!-- Select Process -->
        <label for="process_id">Select Process</label>
        <select id="process_id" name="process_id" required>
            {% for p in processes %}
            <option value="{{ p.process_id }}">{{ p.name }}</option>
            {% endfor %}
        </select>

        <!-- Document Upload or URL -->
        <label for="doc_file">Upload Document</label>
        <input type="file" id="doc_file" name="doc_file">

        <label for="doc_url">Or Document URL</label>
        <input type="url" id="doc_url" name="doc_url" placeholder="https://...">

        <!-- Document Type -->
        <label for="document_type_id">Document Type</label>
        <select id="document_type_id" name="document_type_id" required>
            {% for d in document_types %}
            <option value="{{d.document_type_id}}">{{d.name}}</option>
            {% endfor %}
        </select>


        <!-- Extracted Data -->
        <label for="extracted_data">Extracted Data (Manual Entry)</label>
        <textarea id="extracted_data" name="extracted_data" placeholder="Enter extracted details here..." rows="4"></textarea>

        <button type="submit">Submit</button>
    </form>
</div>

<!-- Toast -->
{% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
        <div id="toast" class="toast {% if messages[0][0] == 'error' %}error{% endif %}">
            {{ messages[0][1] }}
        </div>
        <script>
            window.onload = function() {
                let toast = document.getElementById("toast");
                toast.classList.add("show");
                setTimeout(() => { toast.classList.remove("show"); }, 3000);
            }
        </script>
    {% endif %}
{% endwith %}

<!-- Footer -->
<footer style="
    background: linear-gradient(to right, #004aad, #2563eb);
    color: white;
    text-align: center;
    padding: 12px 10px;
    font-size: 14px;
    letter-spacing: 0.3px;
    margin-top: 40px;
    position: fixed;
    bottom: 0;
    width: 100%;
">
    <p style="margin: 0;">
        Made with ðŸ’» & â˜• by <strong>Jahnavi</strong> â€” 
        <em>May your queries be fast and your bugs be shallow</em>
    </p>
</footer>

</body>
</html>
